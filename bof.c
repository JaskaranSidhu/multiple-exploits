#include <stdio.h>     // printf, fopen, fread, FILE, stderr
#include <string.h>    // memcpy
#include "shellcode.h" // x86-64 shellcode

int main(int argc, char * argv[])
{
    char buffer[256];
    char str[256+32];
    FILE * boffile = fopen("boffile", "r");
    if (boffile == NULL)
    {
        perror("fopen failed");
        return 1;
    }
    size_t bytes_read = fread(str, sizeof(char), sizeof(str), boffile);
    if (bytes_read != sizeof(str))
    {
        fprintf(stderr, "fread didn't find enough bytes\n");
        return 1;
    }

    memcpy(buffer, str, sizeof(str));

    printf("Returning from main\n");
    return 0;
}
